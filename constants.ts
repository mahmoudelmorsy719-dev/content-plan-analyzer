import { Question, Result } from './types';

// Helper to generate 1-5 options
const createScaleOptions = (qId: number) => [
  { id: `q${qId}_opt1`, text: "1", value: 1 },
  { id: `q${qId}_opt2`, text: "2", value: 2 },
  { id: `q${qId}_opt3`, text: "3", value: 3 },
  { id: `q${qId}_opt4`, text: "4", value: 4 },
  { id: `q${qId}_opt5`, text: "5", value: 5 },
];

export const QUESTIONS: Question[] = [
  {
    id: 1,
    text: "هل درست جمهورك المستهدف بعمق؟",
    example: "مثال: جمهورك نساء بين 25–35 سنة، مهتمات بالعناية الشخصية، ويعتمدن في قرارات الشراء على التقييمات وتجارب الآخرين.",
    options: createScaleOptions(1),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "تقييمك الحالي يشير إلى وجود فجوة واضحة في فهم جمهورك المستهدف. هذا المستوى يعني أن المحتوى يتم إنتاجه بدون اعتماد على بيانات حقيقية عن العميل، مما يقلل فرص التحويل والمبيعات.",
        recommendation: "تنفيذ Customer Research شامل لتحديد الخصائص الديموغرافية والنفسية للجمهور، وتصميم Customer Journey Map توضح مراحل العميل من الوعي بالبراند وحتى قرار الشراء وما بعده."
      },
      {
        range: [3],
        diagnosis: "مستواك متوسط في فهم الجمهور، لكن ما زال يحتاج إلى تعميق. لديك تصور عام عن جمهورك، لكن التحليل غير كافٍ لبناء محتوى مؤثر ومستدام.",
        recommendation: "التعمق في تحليل الدوافع النفسية والمخاوف الشرائية للجمهور، واستخدام Insights وبيانات الأداء لفهم نقاط التحول الحقيقية (Conversion Points)."
      },
      {
        range: [4, 5],
        diagnosis: "مستوى ممتاز في فهم الجمهور ورحلة العميل. هذا يدل على أن قرارات المحتوى لديك مبنية على وعي حقيقي بسلوك العميل، مما يزيد فرص النجاح والتحويل.",
        recommendation: "الحفاظ على تحديث بيانات الجمهور بشكل دوري، واختبار شرائح جديدة (Audience Segments) لتوسيع قاعدة العملاء دون فقد الهوية الأساسية."
      }
    ]
  },
  {
    id: 2,
    text: "هل درست منافسيك وفهمت محتواهم ونقاط القوة والضعف عندهم؟",
    example: "مثال: لاحظت أن المنافس المباشر يركز على الفيديوهات القصيرة (Reels) التي تجيب على أسئلة الجمهور، مما يمنحه تفاعلاً عالياً ومستمراً.",
    options: createScaleOptions(2),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "غياب تحليل المنافسين يضعف قدرتك على التميّز ويجعلك تكرر محتوى السوق.",
        recommendation: "إعادة دراسة المنافسين المباشرين وغير المباشرين وتصنيفهم حسب القوة وتحليل محتواهم."
      },
      {
        range: [3],
        diagnosis: "تحليل المنافسين موجود لكنه غير مكتمل أو غير مستمر.",
        recommendation: "استخدام أدوات تحليل ومتابعة دورية لاستخراج أفضل الممارسات وتطوير أسلوبك الخاص."
      },
      {
        range: [4, 5],
        diagnosis: "لديك وعي قوي بحركة المنافسين ونقاط ضعفهم.",
        recommendation: "التركيز على الابتكار وعدم الاكتفاء برد الفعل على المنافسة."
      }
    ]
  },
  {
    id: 3,
    text: "هل حللت أداء محتواك السابق وحددت نقاط القوة والضعف والفرص والتحديات (SWOT)؟",
    example: "مثال: نقاط القوة هي جودة المنتجات والصور، ونقاط الضعف هي قلة النشر، والفرصة هي استغلال المواسم، والتهديد هو دخول منافسين جدد بأسعار أقل.",
    options: createScaleOptions(3),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "غياب تحليل ذاتي واضح يجعل البراند غير ثابت الهوية.",
        recommendation: "تنفيذ SWOT Analysis وجمع آراء العملاء لفهم الصورة الذهنية الحقيقية."
      },
      {
        range: [3],
        diagnosis: "تحليل ذاتي جزئي لكنه غير مرتبط بالأرقام.",
        recommendation: "مراجعة أداء المحتوى بالأرقام وربط الانطباع بالنتائج الفعلية."
      },
      {
        range: [4, 5],
        diagnosis: "البراند واضح الهوية ومدعوم بتحليل جيد.",
        recommendation: "مراجعة التحليل دوريًا لمواكبة التغيرات في السوق."
      }
    ]
  },
  {
    id: 4,
    text: "هل حددت أهدافك التسويقية والمرحلية (بيع – ترويج – وعي) بطريقة SMART؟",
    example: "مثال: زيادة المبيعات عبر الموقع الإلكتروني بنسبة 20% خلال الربع القادم، ورفع معدل الوعي بالعلامة التجارية بنسبة 15%.",
    options: createScaleOptions(4),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "غياب أهداف واضحة يجعل المحتوى بلا اتجاه أو قياس.",
        recommendation: "صياغة أهداف SMART وتقسيمها إلى وعي، تفاعل، مبيعات، ولاء."
      },
      {
        range: [3],
        diagnosis: "الأهداف موجودة لكنها غير دقيقة أو غير مرتبطة بزمن.",
        recommendation: "تحديد أهداف رقمية شهرية وربط كل هدف بمؤشر أداء واضح."
      },
      {
        range: [4, 5],
        diagnosis: "الأهداف واضحة وقابلة للقياس.",
        recommendation: "مراجعة الأهداف دوريًا وضبطها حسب النتائج."
      }
    ]
  },
  {
    id: 5,
    text: "هل حددت ركائز المحتوى التي تبني عليها خطتك؟",
    example: "مثال: تقسيم المحتوى إلى 40% قيمة تعليمية، 30% محتوى ترفيهي وتفاعلي، 20% ترويج مباشر للمنتجات، و10% آراء عملاء (Social Proof).",
    options: createScaleOptions(5),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "المحتوى غير متوازن ولا يخدم أهداف واضحة.",
        recommendation: "تحديد 3–5 ركائز أساسية وربط كل ركيزة بهدف تسويقي."
      },
      {
        range: [3],
        diagnosis: "الركائز موجودة لكن تحتاج تنويع.",
        recommendation: "إضافة أنواع محتوى جديدة مثل قصص العملاء وBehind the Scenes."
      },
      {
        range: [4, 5],
        diagnosis: "الركائز متوازنة ومؤثرة.",
        recommendation: "تحليل أداء كل ركيزة شهريًا لضمان استمرار فعاليتها."
      }
    ]
  },
  {
    id: 6,
    text: "هل لديك استراتيجية واضحة لنغمة الصوت، وخطة شهرية شاملة مرتبطة بالأهداف الكبرى؟",
    example: "مثال: نغمة الصوت ودودة وقريبة من الجمهور (لغة بيضاء)، مع وجود تقويم محتوى (Calendar) يغطي جميع المناسبات والعروض للشهر القادم.",
    options: createScaleOptions(6),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "غياب نغمة واضحة وخطة شهرية يضعف هوية البراند.",
        recommendation: "إعداد Tone of Voice Guide وخطة محتوى شهرية مرتبطة بالمبيعات."
      },
      {
        range: [3],
        diagnosis: "النغمة والخطة موجودتان لكن غير مستغلتين بالكامل.",
        recommendation: "ربط الخطة بالمواسم والعروض الفعلية."
      },
      {
        range: [4, 5],
        diagnosis: "النغمة والخطة مترابطتان بذكاء مع أهداف الشركة.",
        recommendation: "الاستمرار في تطوير الأسلوب القصصي والتميّز اللغوي."
      }
    ]
  },
  {
    id: 7,
    text: "هل يتم كتابة المحتوى وتصميمه بطريقة احترافية تعكس هوية البراند وتضمن اتساق الرسالة؟",
    example: "مثال: النصوص (الكابشن) مكتوبة بأسلوب جذاب يخلو من الأخطاء الإملائية، والتصاميم تعكس ألوان الهوية البصرية بشكل متناسق واحترافي.",
    options: createScaleOptions(7),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "ضعف في جودة التنفيذ يؤثر مباشرة على صورة البراند.",
        recommendation: "تطوير مهارات الكتابة وإنشاء Brand Kit ثابت للتصميم."
      },
      {
        range: [3],
        diagnosis: "التنفيذ جيد لكنه غير ثابت.",
        recommendation: "تفعيل مراجعة داخلية وتحليل تفاعل الجمهور مع الأنماط المختلفة."
      },
      {
        range: [4, 5],
        diagnosis: "تنفيذ احترافي ومتسق.",
        recommendation: "الاستمرار في اختبار صيغ جديدة دون كسر الهوية."
      }
    ]
  },
  {
    id: 8,
    text: "هل تنفذ استراتيجية نشر متكاملة تشمل توقيت المحتوى، تخصيصه لكل منصة، متابعة الأداء، والتفاعل مع الجمهور بشكل ذكي؟",
    example: "مثال: النشر يتم في أوقات الذروة (7 مساءً) بناءً على التحليلات، مع إعادة تدوير المحتوى (Repurposing) ليناسب كل منصة (فيديو لـ TikTok وصورة لـ Instagram).",
    options: createScaleOptions(8),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "النشر عشوائي والتفاعل ضعيف.",
        recommendation: "تحليل مواعيد النشر ووضع روتين تفاعل فوري بعد النشر."
      },
      {
        range: [3],
        diagnosis: "إدارة النشر جيدة لكنها غير مستغلة بالكامل.",
        recommendation: "تخصيص المحتوى لكل منصة واستغلال الترندات بذكاء."
      },
      {
        range: [4, 5],
        diagnosis: "إدارة نشر وتفاعل قوية.",
        recommendation: "الحفاظ على سرعة التفاعل ومراقبة تغير سلوك الجمهور."
      }
    ]
  },
  {
    id: 9,
    text: "هل تقوم بتحليل الأداء باستخدام مؤشرات محددة، مراجعة النتائج، واستنتاج الدروس لتحسين المحتوى؟",
    example: "مثال: متابعة أسبوعية لعدد الوصول (Reach)، نسبة التفاعل (Engagement Rate)، وعدد الرسائل المستلمة، لتحديد أي المنشورات حققت مبيعات فعلية.",
    options: createScaleOptions(9),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "غياب القياس يجعل التطوير عشوائيًا.",
        recommendation: "تحديد KPIs واضحة وإنشاء Dashboard متابعة أسبوعية."
      },
      {
        range: [3],
        diagnosis: "التحليل موجود لكنه غير مرتبط بالنتائج التجارية.",
        recommendation: "ربط الأداء بالمبيعات أو الـLeads وتحليل كل نوع محتوى."
      },
      {
        range: [4, 5],
        diagnosis: "تحليل مبني على بيانات حقيقية.",
        recommendation: "تطوير التحليل التنبؤي واتخاذ قرارات مبكرة."
      }
    ]
  },
  {
    id: 10,
    text: "هل تقوم بتحديث استراتيجيتك للمحتوى بشكل دوري بناءً على النتائج وتريندات السوق؟",
    example: "مثال: نقوم بمراجعة الخطة كل 3 أشهر لتحديثها بناءً على تغيرات خوارزميات المنصات، والدروس المستفادة من الحملات السابقة، وأفكار السوق الجديدة.",
    options: createScaleOptions(10),
    feedback: [
      {
        range: [1, 2],
        diagnosis: "الاستراتيجية ثابتة ولا تتطور.",
        recommendation: "مراجعة الاستراتيجية ربع سنويًا ومتابعة السوق."
      },
      {
        range: [3],
        diagnosis: "التطوير موجود لكنه غير منتظم.",
        recommendation: "تفعيل جلسات تقييم شهرية وتحسين مستمر."
      },
      {
        range: [4, 5],
        diagnosis: "ثقافة تطوير مستمرة.",
        recommendation: "استخدام أدوات الذكاء الاصطناعي لدعم الابتكار والتحليل."
      }
    ]
  }
];

// Simplified general result just for header, detailed result is now per question
export const getResult = (answers: Record<number, string>): Result => {
  let totalScore = 0;
  Object.values(answers).forEach(ansId => {
    QUESTIONS.forEach(q => {
      const opt = q.options.find(o => o.id === ansId);
      if (opt) totalScore += opt.value;
    });
  });

  if (totalScore >= 40) {
    return {
      title: "أداء استراتيجي ممتاز",
      description: "لقد أظهرت وعياً عالياً بمتطلبات السوق. إليك تفاصيل التقرير أدناه:",
      type: 'success',
      imageKeyword: 'success'
    };
  } else if (totalScore >= 30) {
    return {
      title: "أداء جيد بفرص تطوير واعدة",
      description: "لديك أساسيات قوية، ولكن هناك نقاط محددة تحتاج للعمل عليها. إليك التفاصيل:",
      type: 'info',
      imageKeyword: 'strategy'
    };
  } else {
    return {
      title: "فرصة لإعادة البناء بشكل أقوى",
      description: "النتائج تشير إلى الحاجة لمراجعة شاملة. لا تقلق، التقرير التالي سيرشدك خطوة بخطوة:",
      type: 'warning',
      imageKeyword: 'paper'
    };
  }
};